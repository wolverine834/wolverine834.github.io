"use strict";function guestSignInSuccessful(){if(sections=$("section"),nav=$(".br-rsvp__nav"),nav_height=nav.height(),avatarHeight=$(window).height()/2+33,avatarBrideSelector=$("[re=js-br-rsvp__bride-and-groom_bride]"),avatarGroomSelector=$("[re=js-br-rsvp__bride-and-groom_groom]"),avatarBRimg=$(".br-rsvp__bride-and-groom img"),sectionRegistry=$("[rel=js-br-rsvp__registry]"),sectionBridalSlide=$("[rel=js-br-rsvp__bridalParty-slider]"),sectionBridalSlideNav=$("[rel=js-br-rsvp__bridalParty-slider-nav]"),registryRightHeight=$(".js-br-rsvp__registry-right").height(),rsvpSection_BridalParty(),guestlistSlider(),$.browser.desktop?rsvpScrollMagic():($.browser.mobile||isAndroidNative)&&guestMobileOnly(),!window.addtocalendar||"function"!=typeof window.addtocalendar.start){if(void 0==window.ifaddtocalendar){window.ifaddtocalendar=1;var e=document,r=e.createElement("script"),s="getElementsByTagName";r.type="text/javascript",r.charset="UTF-8",r.async=!0,r.src=("https:"==window.location.protocol?"https":"http")+"://addtocalendar.com/atc/1.5/atc.min.js";var t=e[s]("body")[0];t.appendChild(r)}$("#rsvp-form-modal").on("hidden.bs.modal",function(){guestComfirmed()}),$(window).on("scroll",function(){var e=$(this).scrollTop();sections.each(function(){var r=$(this).offset().top-(nav_height+10),s=r+$(this).outerHeight();if(e>=r&&s>=e){var t=$(this).attr("id");nav.find("a").parent().removeClass("active"),nav.find('a[data-slide-to="'+t+'"]').parent().addClass("active")}})}),nav.find("a").on("click",function(){var e=$(this),r=e.data("slide-to");return nav.find("a").parent().removeClass("active"),nav.find('a[data-slide-to="'+r+'"]').parent().addClass("active"),nav.find('a[data-slide-to="'+r+'"]').parent().hasClass("br-rsvp__rsvp-form_btn")&&initializeForm(),$("html, body").animate({scrollTop:$("#"+r).offset().top-nav_height},500),!1}),$(".br-rsvp__back-to-top, .br-nav-brand").click(function(){$("html, body").animate({scrollTop:0},"slow")}),$(".br-rsvp__intro_scoll-down").click(function(){$("html, body").animate({scrollTop:$("#greeting").offset().top-nav_height},"slow")}),$(".js-br-rsvp__registry-left").css("height",registryRightHeight)}}function guestMobileOnly(){$("body").addClass("isMobile"),$("#intro").height(windowHeight).unwrap(),$(".br-rsvp__intro_background,br-rsvp__intro_background-fade").remove(),$(".br-rsvp__agenda").css("display","inline-block"),$(window).on("scroll",function(){$(window).scrollTop()>windowHeight-55?$("[rel=js-br-rsvp__nav]").addClass("mobile-nav"):$("[rel=js-br-rsvp__nav]").removeClass("mobile-nav")})}function guestSignIn(){var e=$("[rel=js-br-rsvp__guestSignIn-rmb-value]"),r=!1,s=void 0!==Cookies.get("BeRichinlove_secret_code")?Cookies.get("BeRichinlove_secret_code"):"empty";"empty"!==s&&($("[rel=js-br-rsvp__guestSignIn-secretCode]").val(s),$("[rel=js-br-rsvp__guestSignIn-rmb-value]").prop("checked",!0),$("[rel=js-br-rsvp__guestSignIn-btn]").removeClass("disabled")),$("#guest-signin").formValidation({framework:"bootstrap",err:{container:".br-rsvp__guestSignIn-msg"},icon:{valid:formValidIcon,invalid:forInvalidIcon,validating:"glyphicon glyphicon-refresh"},fields:{password:{validators:{notEmpty:{message:"The username is required"},regexp:{regexp:/^[a-zA-Z0-9_\.]+$/,message:"The username can only consist of alphabetical, number, dot and underscore"}}}}}),$(".br-rsvp__guestSignIn-secretCode").keyup(function(){$(".br-rsvp__guestSignIn-password-msg").text(""),13==event.keyCode&&$("[rel=js-br-rsvp__guestSignIn-btn]").click()}),$("[rel=js-br-rsvp__guestSignIn-btn]").on("click",function(){$(this).find(preloader).fadeIn(),checkDatabase(r)}),e.on("click",function(){r=$("[rel=js-br-rsvp__guestSignIn-rmb-value]").prop("checked")?!0:!1}),$("[rel=js-br-rsvp__preloader-wrapper]").fadeOut()}function guestlistSlider(){$("[rel=js-br-rsvp__engagement-slider]").slick({dots:!1,centerMode:!0,centerPadding:"200px",slidesToShow:1,arrows:!0,asNavFor:sectionBridalSlide,focusOnSelect:!0,responsive:[{breakpoint:1200,settings:{arrows:!0,centerMode:!0,centerPadding:"60px",slidesToShow:1}},{breakpoint:768,settings:{arrows:!0,centerMode:!0,centerPadding:"60px",slidesToShow:1}},{breakpoint:480,settings:{arrows:!0,centerMode:!0,centerPadding:"0",slidesToShow:1}}]}),sectionBridalSlideNav.slick({dots:!1,centerMode:!0,centerPadding:"200px",slidesToShow:3,arrows:!0,focusOnSelect:!0,responsive:[{breakpoint:1200,settings:{arrows:!0,centerMode:!0,centerPadding:"60px",slidesToShow:5}},{breakpoint:768,settings:{arrows:!0,centerMode:!0,centerPadding:"60px",slidesToShow:3}},{breakpoint:480,settings:{arrows:!0,centerMode:!0,centerPadding:"10px",slidesToShow:3}}]}),sectionBridalSlideNav.slick("slickGoTo",timeDay)}function rsvpSection_BridalParty(){$("[rel=js-br-rsvp__bridalParty-modal]");$(".br-rsvp__bridalParty__filter-button").click(function(){var e=$(this).attr("data-filter-button");$(".br-rsvp__bridalParty__filter-button").removeClass("filter-active"),$(this).addClass("filter-active"),"groomsmen"===e?(sectionBridalSlideNav.slick("slickUnfilter"),sectionBridalSlideNav.slick("slickFilter",":even"),sectionBridalSlideNav.slick("slickGoTo",2)):"bridesmaid"===e?(sectionBridalSlideNav.slick("slickUnfilter"),sectionBridalSlideNav.slick("slickFilter",":odd"),sectionBridalSlideNav.slick("slickGoTo",4)):(sectionBridalSlideNav.slick("slickUnfilter"),sectionBridalSlideNav.slick("slickGoTo",timeDay))})}function rsvpScrollMagic(){{var e=(new TimelineMax).to(".br-rsvp__nav",1,{css:{backgroundColor:"rgba(255,255,255,.9)"},ease:Circ.easeOutExpo}),r=(new ScrollMagic.Scene({triggerElement:0,duration:400,triggerHook:1,offset:0}).setTween(e).addTo(controller),(new TimelineMax).to(".br-rsvp__nav_link a, .br-nav-brand",1,{css:{color:"#333"},ease:Circ.easeOutExpo})),e=(new ScrollMagic.Scene({triggerElement:0,duration:400,triggerHook:1,offset:0}).setTween(r).addTo(controller),(new TimelineMax).to(".br-rsvp__nav",1,{css:{borderColor:"#ecf0f1"},ease:Circ.easeOutExpo})),s=(new ScrollMagic.Scene({triggerElement:".br-rsvp__additional-hook",duration:20,triggerHook:0,offset:-50}).setTween(e).addTo(controller),(new TimelineMax).to(".br-rsvp__intro_content,.br-rsvp__intro_footer",1,{opacity:0,ease:Circ.easeOutExpo})),t=(new ScrollMagic.Scene({triggerElement:0,duration:400,triggerHook:1,offset:20}).setTween(s).addTo(controller),(new TimelineMax).from(".becky",1,{x:"-40px",opacity:0,ease:Circ.easeOutExpo})),o=(new ScrollMagic.Scene({triggerElement:".about-us_start-hook",duration:200,triggerHook:1,offset:-30}).setTween(t).addTo(controller),(new TimelineMax).from(".richard",1,{x:"40px",opacity:0,ease:Circ.easeOutExpo})),a=(new ScrollMagic.Scene({triggerElement:".about-us_start-hook",duration:200,triggerHook:1,offset:-30}).setTween(o).addTo(controller),(new TimelineMax).from(".br-rsvp__greeting .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),n=(new ScrollMagic.Scene({triggerElement:".br-rsvp__greeting .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(a).addTo(controller),(new TimelineMax).from(".br-rsvp__aboutUs .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),i=(new ScrollMagic.Scene({triggerElement:".br-rsvp__aboutUs .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(n).addTo(controller),(new TimelineMax).from(".br-rsvp__bridalParty .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),l=(new ScrollMagic.Scene({triggerElement:".br-rsvp__bridalParty .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(i).addTo(controller),(new TimelineMax).from(".br-rsvp__social-media .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),c=(new ScrollMagic.Scene({triggerElement:".br-rsvp__social-media .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(l).addTo(controller),(new TimelineMax).from(".br-rsvp__social-media img",1,{opacity:0,y:"50px",ease:Circ.easeOutExpo})),d=(new ScrollMagic.Scene({triggerElement:".br-rsvp__social-media img",duration:500,triggerHook:1,offset:50}).setTween(c).addTo(controller),(new TimelineMax).from(".br-rsvp__venue .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),m=(new ScrollMagic.Scene({triggerElement:".br-rsvp__venue .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(d).addTo(controller),(new TimelineMax).from(".br-rsvp__registry .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo})),m=(new ScrollMagic.Scene({triggerElement:".br-rsvp__registry .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(m).addTo(controller),(new TimelineMax).from(".br-rsvp__registry-img",1,{y:"80px",ease:Circ.easeOutExpo})),p=(new ScrollMagic.Scene({triggerElement:".br-rsvp__registry-img",duration:500,triggerHook:1,offset:0}).setTween(m).addTo(controller),(new TimelineMax).from(".br-rsvp__rsvp .br-rsvp__content",1,{opacity:0,y:"40px",ease:Circ.easeOutExpo}));new ScrollMagic.Scene({triggerElement:".br-rsvp__rsvp .br-rsvp__content",duration:500,triggerHook:1,offset:50}).setTween(p).addTo(controller)}if($.browser.desktop){var u=(new TimelineMax).to(".br-rsvp__intro_background",1,{css:{opacity:0},ease:Circ.easeOutExpo}),f=(new ScrollMagic.Scene({triggerElement:".about-us_start-hook",duration:400,triggerHook:1,offset:0}).setTween(u).addTo(controller),(new TimelineMax).to(".background-img.regular",1,{css:{scaleX:1.1,scaleY:1.1},ease:Circ.easeOutExpo})),g=(new ScrollMagic.Scene({triggerElement:0,duration:400,triggerHook:1,offset:0}).setTween(f).addTo(controller),(new TimelineMax).to(".background-img.blur",1,{css:{scaleX:1.1,scaleY:1.1,opacity:1},ease:Circ.easeOutExpo})),_=(new ScrollMagic.Scene({triggerElement:0,duration:300,triggerHook:1,offset:0}).setTween(g).addTo(controller),(new TimelineMax).to(".br-rsvp__intro_background-fade",1,{opacity:.8,ease:Circ.easeOutExpo})),v=(new ScrollMagic.Scene({triggerElement:0,duration:500,triggerHook:1,offset:0}).setTween(_).addTo(controller),(new TimelineMax).from(".time-1",1,{opacity:0,x:"-40px",ease:Circ.easeOutExpo})),b=(new ScrollMagic.Scene({triggerElement:".time-1",duration:400,triggerHook:1,offset:0}).setTween(v).addTo(controller),(new TimelineMax).from(".time-2",1,{opacity:0,x:"40px",ease:Circ.easeOutExpo})),h=(new ScrollMagic.Scene({triggerElement:".time-2",duration:400,triggerHook:1,offset:20}).setTween(b).addTo(controller),(new TimelineMax).from(".time-3",1,{opacity:0,x:"-40px",ease:Circ.easeOutExpo})),S=(new ScrollMagic.Scene({triggerElement:".time-3",duration:400,triggerHook:1,offset:-100}).setTween(h).addTo(controller),(new TimelineMax).from(".time-4",1,{opacity:0,x:"40px",ease:Circ.easeOutExpo}));new ScrollMagic.Scene({triggerElement:".time-4",duration:400,triggerHook:1,offset:-100}).setTween(S).addTo(controller)}else{var v=(new TimelineMax).from(".time-1",1,{opacity:0,y:"30px",ease:Circ.easeOutExpo}),b=(new ScrollMagic.Scene({triggerElement:".time-1",duration:400,triggerHook:1,offset:0}).setTween(v).addTo(controller),(new TimelineMax).from(".time-2",1,{opacity:0,y:"30px",ease:Circ.easeOutExpo})),h=(new ScrollMagic.Scene({triggerElement:".time-2",duration:400,triggerHook:1,offset:20}).setTween(b).addTo(controller),(new TimelineMax).from(".time-3",1,{opacity:0,y:"30px",ease:Circ.easeOutExpo})),S=(new ScrollMagic.Scene({triggerElement:".time-3",duration:400,triggerHook:1,offset:-100}).setTween(h).addTo(controller),(new TimelineMax).from(".time-4",1,{opacity:0,y:"30px",ease:Circ.easeOutExpo}));new ScrollMagic.Scene({triggerElement:".time-4",duration:400,triggerHook:1,offset:-100}).setTween(S).addTo(controller)}}function checkDatabase(e){var r=$(secretCodeInputSelector).val();"18022019"===r?$.ajax({url:"assets/scripts/guest-credential.json",crossDomain:!0,type:"GET",cache:!1,async:!0,timeout:3e5,dataType:"json",contentType:"text/plain",statusCode:{500:function(){$(".br-rsvp__guestSignIn-password-msg").text("Technical difficulties with the server, please refresh."),$("[rel=js-br-rsvp__guestSignIn-btn]").addClass("disabled"),$(".form-control-feedback ").removeClass("icon-br icon-br-done"),$(".br-rsvp__guestSignIn-secretCode").val(""),$(preloader).fadeOut()}},success:function(s){ga("set","dimension1",r),$("[rel=js-br-rsvp__guestSignIn-btn]").attr("disabled"),e===!0?Cookies.set("BeRichinlove_secret_code",r,{expires:200}):Cookies.remove("BeRichinlove_secret_code"),$(".br-rsvp__award-container").hide(),checkSuccess(s),$(preloader).fadeOut()},error:function(e,r){console.log(r)}}):($(".br-rsvp__guestSignIn-password-msg").text("Incorrect code (Case sensitive)"),$("[rel=js-br-rsvp__guestSignIn-btn]").addClass("disabled"),$(".form-control-feedback ").removeClass("icon-br icon-br-accept"),$(".br-rsvp__guestSignIn-secretCode").val(""),$(preloader).fadeOut())}function checkSuccess(e){$(".br-rsvp__guestSignIn-successful").load("index-content.html",function(){guestSignInSuccessful(),TweenLite.to(".br-rsvp__guestSignIn",1,{css:{opacity:0},ease:Circ.easeOutExpo,onComplete:guestSignInCompleted}),TweenLite.to(".br-rsvp__intro_content-title_img, .br-rsvp__intro_content-title-subtitle, .br-rsvp__intro_btn",1,{opacity:1,y:"-30px",ease:Circ.easeOutExpo}),TweenLite.to(".br-rsvp__intro_footer",1,{opacity:1,y:"20px",delay:.2,ease:Circ.easeOutExpo}),renderGuestinfo(e)})}function guestSignInCompleted(){$(".br-rsvp__guestSignIn").remove()}function renderGuestinfo(e){formSelector=$(".br-rsvp__form_guest-rsvp");for(var r=0,s=e.length,t=0;t<e.length;t++){var o=e[t];if("yes"===o.plusOne||1===s){var a=""===o.greetingTitle?o.firstName:o.greetingTitle,n=o.firstName+" "+o.lastName;ga("send","pageview",{dimension2:n}),1===s&&$("[rel=js-br-rsvp__form_info-plus-one-profile]").remove(),"pending"!==o.response&&($(".br-rsvp__form_guest-response_options").hasClass("no")?$("[rel=js-br-rsvp__form_info-response-yes]").show():$("[rel=js-br-rsvp__form_info-response-no]").show()),$(guestGreetingNameSelector).text(a),$(formSelector).attr("data-guest-id",o._id),$(formSelector).attr("data-guest-first-name",o.firstName),$(formSelector).attr("data-guest-last-name",o.lastName),$(guestAdditionalGuestsSelector).val(o.additionalGuests),$(formSelector).attr("data-guest-email",o.emailAddress),$(formSelector).attr("data-guest-allergy",o.foodRestriction),$(guestSecretCodeSelector).val(o.secretCode),$(guestSideSelector).val(o.side),$(guestTableNumberSelector).val(o.tableNumber),$(formSelector).attr("data-guest-phone-number",o.phoneNumber),$(guestRelationSelector).val(o.relation),$(formSelector).attr("data-guest-response",o.response),$(guestGroupNameSelector).val(o.groupName),$(formSelector).attr("data-guest-plus-one",o.plusOne),$(formSelector).attr("data-guest-message",o.message)}else"no"===o.plusOne&&o.plusOne.length>2?$(o).each(function(){r++,$(formGuestPlusOneAndMoreSelector).append('<div class="panel panel-default br-rsvp__form_guest_plus-one "  rel="js-br-rsvp__form_guest_plus-one" data-plus-one-id="'+o._id+'" data-plus-one-response="'+o.response+'"  data-plus-one-first-name="'+o.firstName+'" data-plus-one-last-name="'+o.lastName+'" data-plus-one-allergy="'+o.foodRestriction+'"><div class="panel-heading"><a data-toggle="collapse" data-parent="#plus-one-two-plus" href="#plus-one-'+r+'">'+r+'</a></div><div id="plus-one-'+r+'" class="panel-collapse collapse"><div class="panel-body"><div class="row br-rsvp__form_plus-one-detail-wrapper"><div class="col-xs-12 col-sm-6"><div class="form-group"><input id="guest-first-name" type="text" class="form-control" name="plus-one-first-name"  rel="js-br-rsvp__guest-profile_first-name" required><label for="plus-one-first-name">First Name</label></div></div><div class="col-xs-12 col-sm-6"><div class="form-group"><input id="guest-last-name" type="text" class="form-control" name="plus-one-last-name" rel="js-br-rsvp__guest-profile_last-name" required><label for="plus-one-last-name">Last Name</label></div></div></div><div class="row br-rsvp__form_plus-one-detail-wrapper"><div class="col-xs-12"><div class="form-group"><textarea id="guest-allergy" class="form-control" name="allergies" rel="js-br-rsvp__guest-profile_allergy"></textarea><label for="guest-allergy">Allergies: Please seperate with a comma...</label></div></div></div></div></div></div>').show()}):"no"===o.plusOne&&$(o).each(function(){r++,$(formGuestPlusOneSelector).append('<div class="br-rsvp__form_guest_plus-one"  rel="js-br-rsvp__form_guest_plus-one" data-plus-one-id="'+o._id+'" data-plus-one-response="'+o.response+'" data-plus-one-first-name="'+o.firstName+'" data-plus-one-last-name="'+o.lastName+'" data-plus-one-allergy="'+o.foodRestriction+'"><h6 class="br-rsvp__form_guest-content-subtitle">Guest '+r+' Detail:</h6><div class="row br-rsvp__form_plus-one-response_options-wrapper"><div class="col-xs-12"><div class="br-rsvp__form_plus-one-response_options yes" rel="js-br-rsvp__form_plus-one-info-answer_options-yes"><span class="br-rsvp__form_plus-one-response_options-circle"><i class="icon yes"></i></span><p>Coming</p></div><div class="br-rsvp__form_plus-one-response_options no" rel="js-br-rsvp__form_info-plus-one-answer_options-no"><span class="br-rsvp__form_plus-one-response_options-circle"><i class="icon no"></i></span><p>Not coming</p></div></div></div><div class="row br-rsvp__form_plus-one-detail-wrapper"><div class="col-xs-12 col-sm-6"><div class="form-group"><input id="guest-first-name" type="text" class="form-control" name="plus-one-first-name"  rel="js-br-rsvp__guest-profile_first-name" required><label for="plus-one-first-name">First Name</label></div></div><div class="col-xs-12 col-sm-6"><div class="form-group"><input id="guest-last-name" type="text" class="form-control" name="plus-one-last-name" rel="js-br-rsvp__guest-profile_last-name" required><label for="plus-one-last-name">Last Name</label></div></div></div><div class="row br-rsvp__form_plus-one-detail-wrapper"><div class="col-xs-12"><div class="form-group"><textarea id="guest-allergy" class="form-control" name="allergies" rel="js-br-rsvp__guest-profile_allergy"></textarea><label for="guest-allergy">Allergies: Please seperate with a comma...</label></div></div></div></div>').show()})}return initializeForm(),formSelector}function postGuestlist(){var e=[];$(".br-rsvp__form_guest-rsvp, .br-rsvp__form_guest_plus-one").each(function(r){e[r]={},$(this).each(function(){var s="_id",t=$(this).attr($(this).hasClass("main-guest")?"data-guest-id":"data-plus-one-id"),o="firstName",a=$(this).attr($(this).hasClass("main-guest")?"data-guest-first-name":"data-plus-one-first-name"),n="lastName",i=$(this).attr($(this).hasClass("main-guest")?"data-guest-last-name":"data-plus-one-last-name"),l="foodRestriction",c=$(this).attr($(this).hasClass("main-guest")?"data-guest-allergy":"data-plus-one-allergy"),d="response",m=$(this).attr($(this).hasClass("main-guest")?"data-guest-response":"data-plus-one-response"),p="plusOne",u=$(this).hasClass("main-guest")?$(this).attr("data-guest-plus-one"):"no",f="message",g=$(this).hasClass("main-guest")?$(this).attr("data-guest-message"):"",_="phoneNumber",v=$(formSelector).attr("data-guest-phone-number"),b="email",h=$(this).hasClass("main-guest")?$(this).attr("data-guest-email"):"";e[r][s]=t,e[r][o]=a,e[r][n]=i,e[r][l]=c,e[r][d]=m,e[r][p]=u,e[r][f]=g,e[r][_]=v,e[r][b]=h,$(this).hasClass("main-guest")?confirmedGuest.push({firstName:a,lastName:i,phoneNumber:v,email:h,allergies:""!==c?c:"none",response:m,message:g,plusOne:u}):confirmedPlusOne.push({firstName:a,lastName:i,response:m,allergies:""!==c?c:"none"})}),r++}),e.forEach(function(e){{var r=e._id,s=e.firstName,t=e.lastName,o=e.email,a=e.phoneNumber,n=e.foodRestriction,i=e.response,l=e.message,c=(e.plusOne,timeDate);JSON.stringify({$set:{_id:r,firstName:s,lastName:t,emailAddress:o,phoneNumber:a,foodRestriction:n,response:i,timestamp:c,message:l}})}});$("#rsvp-form-modal-confirmation").removeClass("guest-decline")}function initializeForm(){formGuestResponseData=formSelector.attr("data-guest-response"),formGuestFirstNameData=formSelector.attr("data-guest-first-name"),formGuestLastNameData=formSelector.attr("data-guest-last-name"),formGuestEmailData=formSelector.attr("data-guest-email"),formGuestPhoneNumberData=formSelector.attr("data-guest-phone-number"),formGuestAllergyData=formSelector.attr("data-guest-allergy"),formGuestPlusOneData=formSelector.attr("data-guest-plus-one"),formGuestMessageData=formSelector.attr("data-guest-message"),formGuestPlusFirstNameData=$(formPlusOneSelector).attr("data-plus-one-first-name"),formGuestPlusLastNameData=$(formPlusOneSelector).attr("data-plus-one-last-name"),formGuestPlusEmailData=$(formPlusOneSelector).attr("data-plus-one-email"),formGuestPlusPhoneNumberData=$(formPlusOneSelector).attr("data-plus-one-phone-number"),formGuestPlusAllergyData=$(formPlusOneSelector).attr("data-plus-one-allergy"),guestComfirmed(),formValidation(),formGuestResponse(),formPlusOneResponse(),formGuestProfile(),formPlusOneProfile(),formMessage(),$("[rel=js-btn-rsvp-form-submit]").on("click",function(){$(this).prop("disabled",!0),updateForm()}),$("[rel=js-btn-rsvp-form-edit]").on("click",function(){$(this).hide(),$("[rel=js-btn-rsvp-form-submit]").show(),$("#rsvp-form").show(),$(".br-rsvp__form_guest-rsvp-comfirmed").hide()}),$("input").on("click",function(){var e=$(this),r=e.attr("id"),s=$('label[for="'+r+'"]');e.blur(function(){e.parent().hasClass("has-error")&&e.val().length>1?$(s).addClass("formIELabelFix"):e.val().length>0&&$(s).removeClass("formIELabelFix")})})}function guestComfirmed(){("accept"===formGuestResponseData||"decline"===formGuestResponseData)&&($("#rsvp-form").hide(),$("[rel=js-btn-rsvp-form-submit]").hide(),$(".form-btn-edit").show(),$(".br-rsvp__form_guest-rsvp-comfirmed").show())}function formValidation(){$(".rsvp-form-modal").formValidation({framework:"bootstrap",excluded:[":disabled",":hidden",":not(:visible)",".group"],icon:{valid:formValidIcon,invalid:forInvalidIcon,validating:"glyphicon glyphicon-refresh"},button:{selector:".form-btn-submit",disabled:"disabled"},fields:{"guest-first-name":{validators:{notEmpty:{message:"First name is required"}}},"guest-last-name":{validators:{notEmpty:{message:"Last name is required"}}},"guest-mail":{validators:{notEmpty:{message:"E-Mail is required"}}},"plus-one-first-name":{excluded:!0},"plus-one-last-name":{excluded:!0}}}).on("err.prevalidate.fv",function(){})}function IEFix(){$("input").on("click",function(){{var e=$(this),r=e.attr("id"),s=$('label[for="'+r+'"]');s.val()}(e.is(":focus")&&""===e.val()||""===!e.val())&&$(s).addClass("formIELabelFix"),e.blur(function(){""===e.val()?(console.log("empty?"),$(s).removeClass("formIELabelFix")):$(s).addClass("formIELabelFix")})})}function formGuestResponse(){var e,r=".br-rsvp__form_guest-response_options",s="[rel=js-br-rsvp__form_info-answer_options-yes]",t="[rel=js-br-rsvp__form_info-answer_options-no]";"accept"===formGuestResponseData?($(s).find(".icon.yes").removeClass("fade-back-50").addClass("icon-br-accept-circle"),$(t).find(".icon").removeClass("icon-br-decline-circle").addClass("fade-back-50"),$(formResponseContainer).find(".btn-next").attr("data-form-answer","yes").prop("disabled",!1),$("[rel=js-br-rsvp__form_info-response-yes]").show(),$("[rel=js-btn-rsvp-form-submit]").removeClass("disabled")):"decline"===formGuestResponseData&&($(t).find(".icon").removeClass("fade-back-50").addClass("icon-br-decline-circle"),$(s).find(".icon").removeClass("icon-br-accept-circle").addClass("fade-back-50"),$(formResponseContainer).find(".btn-next").attr("data-form-answer","no").prop("disabled",!1),$("[rel=js-br-rsvp__form_info-response-yes]").hide(),$("[rel=js-btn-rsvp-form-submit]").removeClass("disabled")),$(r).click(function(){$(this).hasClass("no")?(e="no",formSelector.attr("data-guest-response","decline"),$(this).find(".icon").removeClass("fade-back-50").addClass("icon-br-decline-circle"),$(s).find(".icon").removeClass("icon-br-accept-circle").addClass("fade-back-50"),$("[rel=js-br-rsvp__form_info-response-yes]").hide(),$(".br-rsvp__form_sent-message").text(""),$("[rel=js-btn-rsvp-form-submit]").prop("disabled",!1),$("[rel=js-btn-rsvp-form-submit]").removeClass("disabled")):(e="yes",formSelector.attr("data-guest-response","accept"),$("[rel=js-br-rsvp__form_info-response-no]").hide(),$(this).find(".icon.yes").removeClass("fade-back-50").addClass("icon-br-accept-circle"),$(t).find(".icon").removeClass("icon-br-decline-circle").addClass("fade-back-50"),$("[rel=js-br-rsvp__form_info-response-yes]").show(),$(".br-rsvp__form_sent-message").text(""),$("[rel=js-btn-rsvp-form-submit]").prop("disabled",!1),$("[rel=js-btn-rsvp-form-submit]").removeClass("disabled")),$(formResponseContainer).find(".btn-next").attr("data-form-answer",e).prop("disabled",!1)})}function formPlusOneResponse(){var e,r=".br-rsvp__form_plus-one-response_options",s="[rel=js-br-rsvp__form_info-plus-one-answer_options-no]";$(formPlusOneSelector).each(function(){var e=$(this).attr("data-plus-one-response");"accept"===e||"pending"===e?($(this).find(".icon.yes").addClass("icon-br-accept-circle"),$(this).find(".icon.no").removeClass("icon-br-decline-circle")):"decline"===e&&($(this).find(".icon.yes").removeClass("icon-br-accept-circle"),$(this).find(".icon.no").addClass("icon-br-decline-circle"),$(this).find(formPlusOneDetailSelector).hide())}),$(r).click(function(){$(this).hasClass("no")?(e="no",$(this).parents(formPlusOneSelector).attr("data-plus-one-response","decline"),$(this).find(".icon").removeClass("fade-back-50").addClass("icon-br-decline-circle"),$(this).parents(formPlusOneSelector).find(".icon").removeClass("icon-br-accept-circle"),$(this).parents(formPlusOneSelector).find("input,textarea").prop("disabled",!0),$(this).parents(formPlusOneSelector).find(formPlusOneDetailSelector).hide()):(e="yes",$(this).parents(formPlusOneSelector).attr("data-plus-one-response","accept"),$(this).find(".icon.yes").removeClass("fade-back-50").addClass("icon-br-accept-circle"),$(this).parents(formPlusOneSelector).find(s).find(".icon").removeClass("icon-br-decline-circle"),$(this).parents(formPlusOneSelector).find("input,textarea").prop("disabled",!1),$(this).parents(formPlusOneSelector).find(formPlusOneDetailSelector).show())})}function formGuestProfile(){$(formMainGuestSelector).find(profileFirstName).val(formGuestFirstNameData),$(formMainGuestSelector).find(profileLastName).val(formGuestLastNameData),$(formMainGuestSelector).find("[rel=js-br-rsvp__guest-profile_phone-number]").val(formGuestPhoneNumberData),$(formMainGuestSelector).find(profileEmail).val(formGuestEmailData),$(formMainGuestSelector).find(profileAllergy).val(formGuestAllergyData)}function formPlusOneProfile(){$(formPlusOneSelector).each(function(){var e=$(this).attr("data-plus-one-first-name"),r=$(this).attr("data-plus-one-last-name"),s=$(this).attr("data-plus-one-allergy");$(this).find(profileFirstName).val(e),$(this).find(profileLastName).val(r),$(this).find(profileAllergy).val(s)})}function formMessage(){var e="Message...( Song requests )",r="Message...( Song requests )";$(formContainerMessage).val(formGuestMessageData),"yes"===formGuestPlusOneData?$(formContainerMessageDescription).text(r).addClass("plusOne"):$(formContainerMessageDescription).text(e)}function updateForm(){"decline"===formSelector.attr("data-guest-response")?($("#rsvp-form-modal-confirmation").addClass("guest-decline"),$(".rsvp-form-modal-confirmation-response-msg").show()):($("#rsvp-form-modal-confirmation").removeClass("guest-decline"),$(".rsvp-form-modal-confirmation-response-msg").hide()),$("#rsvp-form-modal").modal("hide"),$("#rsvp-form-modal-confirmation").modal("show"),$("#rsvp-form-modal-confirmation").on("hidden.bs.modal",function(){$("[rel=js-rsvp-form-modal-confirmation-calendar]").show()});var e=$(formMainGuestSelector).find(profileFirstName).val(),r=$(formMainGuestSelector).find(profileLastName).val(),s=$(formMainGuestSelector).find(profilePhoneNumber).val(),t=$(formMainGuestSelector).find(profileEmail).val(),o=$(formMainGuestSelector).find(profileAllergy).val();formSelector.attr("data-guest-first-name",e),formSelector.attr("data-guest-last-name",r),formSelector.attr("data-guest-phone-number",s),formSelector.attr("data-guest-email",t),formSelector.attr("data-guest-Allergy",o),$(formPlusOneSelector).each(function(){var e=$(this).find(profileFirstName).val(),r=$(this).find(profileLastName).val(),s=$(this).find(profileAllergy).val();s=$(this).find(profileAllergy).val(),$(this).attr("data-plus-one-first-name",e),$(this).attr("data-plus-one-last-name",r),$(this).attr("data-plus-one-Allergy",s)});var a=$(formContainerMessage).val();formSelector.attr("data-guest-message",a)}function formConfirmationEmail(e,r,s){var t=(s[0].firstName,s[0].lastName,s[0].email,s[0].phoneNumber,s[0].foodRestriction,s[0].response,e[0].email),o=e[0].response,a=new mandrill.Mandrill("aLsZA9xj1AMYGfQNp1zFRQ"),n={template_name:"rsvp-confirmation",template_content:[],message:{from_email:"contact@berichinlove.com",to:[{email:t}],subject:"BeRichinlove : RSVP Confirmation",auto_text:!0,inline_css:!0,merge:!0,merge_language:"handlebars",global_merge_vars:[{name:"firstName",content:e[0].firstName},{name:"lastName",content:e[0].lastName},{name:"response",content:e[0].response},{name:"allergies",content:e[0].allergies},{name:"email",content:e[0].email},{name:"phoneNumber",content:e[0].phoneNumber},{name:"plusOne",content:e[0].plusOne}],merge_vars:[{rcpt:t,vars:[{name:"plusOne",content:r},{name:"response",content:o}]}]}};a.messages.sendTemplate(n,function(){console.log(n),$(preloader).fadeOut()},function(e){console.log(e)})}console.log("[Call : main.js]");var sections,nav,nav_height,windowWidth=$(window).width(),windowHeight=$(window).height(),sectionIntro=$("[rel=js-br-rsvp__guestSignIn]"),avatarHeight,avatarBrideSelector,avatarGroomSelector,avatarBRimg,sectionRegistry,sectionBridalSlide,sectionBridalSlideNav,registryRightHeight,timeDate=new Date,timeDay=timeDate.getDay(),timeHour=timeDate.getHours(),formValidIcon="icon-br icon-br-accept",forInvalidIcon="icon-br icon-br-decline",preloader="[rel=js-pulse-loader]",controller=new ScrollMagic.Controller,isAndroidNative=navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)&&navigator.userAgent.indexOf("Version")>-1;$(document).ready(function(){guestSignIn(),FastClick.attach(document.body);var e=document.querySelectorAll("img.inject-me");SVGInjector(e)}),$(window).resize(function(){}),jQuery.support.cors=!0;var secretCodeInputSelector="[rel=js-br-rsvp__guestSignIn-secretCode]",guestIDSelector="[rel=js-br-rsvp__guestInfo-id]",guestFirstNameSelector="[rel=js-br-rsvp__guest-profile_first-name]",guestLastNameSelector="[rel=js-br-rsvp__guest-profile_last-name]",guestAdditionalGuestsSelector="[rel=js-br-rsvp__guest-profile_additional-guests]",guestEmailAddressSelector="[rel=js-br-rsvp__guest-profile_email]",guestFoodRestrictionSelector="[rel=js-br-rsvp__guest-profile_allergy]",guestSecretCodeSelector="[rel=js-br-rsvp__guestInfo-secretCode]",guestSideSelector="[rel=js-br-rsvp__guestInfo-side]",guestTableNumberSelector="[rel=js-br-rsvp__guestInfo-tableNumber]",guestPhoneNumberSelector="[rel=js-br-rsvp__guestInfo-phoneNumber]",guestRelationSelector="[rel=js-br-rsvp__guestInfo-relation]",guestResponseSelector="[rel=js-br-rsvp__guestInfo-response]",guestGroupNameSelector="[rel=js-br-rsvp__guestInfo-groupName]",guestPlusOneSelector="[rel=js-br-rsvp__guestInfo-plusOne]",guestTimestampSelector="[rel=js-br-rsvp__guestInfo-timestamp]",guestGreetingNameSelector="[rel=js-br-rsvp__greeting-name]",confirmedGuest=[],confirmedPlusOne=[],formGuestPlusOneSelector="[rel=js-br-rsvp__form_guest-content-container_plus-one]",formGuestPlusOneAndMoreSelector="[rel=js-br-rsvp__form_guest-content-container_plus-one-two-plus]";console.log("[Call : form.js]"),console.log("----------------"),console.log(":::Credits:::"),console.log("Designed & Developed - Richard Chang (richardchang.me)"),console.log("Engagement Photos - Derek Hui (derekhui.com)"),console.log("Libraries - formValidation.js ,scrollmagic.js, svg-injector.map.js , mongodb , iscroll.js and many more"),console.log("----------------");var formSelector,formResponseContainer="[rel=js-br-rsvp__form_info-response]",formMainGuestSelector="[rel=js-br-rsvp__form_guest-content-container_main-guest]",formContainerMessageDescription="[rel=js-br-rsvp__form_info-message-label]",formContainerMessage="[rel=js-br-rsvp__form_info-message-text]",formPlusOneSelector="[rel=js-br-rsvp__form_guest_plus-one]",formPlusOneDetailSelector=".br-rsvp__form_plus-one-detail-wrapper",formGuestResponseData,formGuestFirstNameData,formGuestLastNameData,formGuestEmailData,formGuestMessageData,formGuestPhoneNumberData,formGuestAllergyData,formGuestPlusOneData,formGuestPlusFirstNameData,formGuestPlusLastNameData,formGuestPlusEmailData,formGuestPlusPhoneNumberData,formGuestPlusAllergyData,profileFirstName="[rel=js-br-rsvp__guest-profile_first-name]",profileLastName="[rel=js-br-rsvp__guest-profile_last-name]",profilePhoneNumber="[rel=js-br-rsvp__guest-profile_phone-number]",profileEmail="[rel=js-br-rsvp__guest-profile_email]",profileAllergy="[rel=js-br-rsvp__guest-profile_allergy]";
